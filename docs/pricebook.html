<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí∞ ORION Price Book Pro - Interactive App</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --p: #1e3a8a;
            --pl: #3b82f6;
            --a: #f59e0b;
            --s: #10b981;
            --d: #ef4444;
            --bg: #0f172a;
            --c: #fff;
            --t: #1e293b
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: var(--t);
            line-height: 1.6
        }

        /* HEADER */
        .header {
            background: linear-gradient(135deg, #0f172a, #1e3a8a);
            padding: 1.5rem;
            text-align: center;
            color: #fff;
            position: sticky;
            top: 0;
            z-index: 1000
        }

        .header h1 {
            font-size: 1.8rem;
            font-weight: 800;
            margin-bottom: .25rem
        }

        .header h1 span {
            color: var(--a)
        }

        .header p {
            opacity: .8;
            font-size: .85rem
        }

        .nav {
            display: flex;
            justify-content: center;
            gap: .5rem;
            margin-top: 1rem;
            flex-wrap: wrap
        }

        .nav-btn {
            padding: .5rem 1.25rem;
            background: rgba(255, 255, 255, .1);
            border: none;
            color: #fff;
            border-radius: 8px;
            font-size: .85rem;
            cursor: pointer;
            transition: .3s
        }

        .nav-btn:hover,
        .nav-btn.active {
            background: var(--a);
            color: var(--bg)
        }

        /* CONTAINER */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1.5rem
        }

        .section {
            display: none;
            animation: fadeIn .3s
        }

        .section.active {
            display: block
        }

        @keyframes fadeIn {
            from {
                opacity: 0
            }

            to {
                opacity: 1
            }
        }

        /* CARD */
        .card {
            background: var(--c);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, .1)
        }

        .card h2 {
            color: var(--p);
            margin-bottom: 1rem;
            font-size: 1.3rem;
            border-bottom: 2px solid var(--a);
            padding-bottom: .5rem
        }

        .card h3 {
            color: var(--p);
            margin: 1rem 0 .5rem;
            font-size: 1.1rem
        }

        /* CALCULATOR */
        .calc-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem
        }

        @media(max-width:768px) {
            .calc-grid {
                grid-template-columns: 1fr
            }
        }

        .input-group {
            margin-bottom: 1rem
        }

        .input-group label {
            display: block;
            font-weight: 600;
            margin-bottom: .25rem;
            color: var(--p);
            font-size: .9rem
        }

        .input-group .explain {
            font-size: .75rem;
            color: #64748b;
            margin-bottom: .5rem;
            line-height: 1.4
        }

        .input-group input,
        .input-group select {
            width: 100%;
            padding: .65rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: .95rem
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: var(--pl)
        }

        .result-card {
            background: linear-gradient(135deg, var(--p), var(--bg));
            color: #fff;
            padding: 1.5rem;
            border-radius: 16px
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            padding: .6rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, .2);
            font-size: .9rem
        }

        .result-total {
            background: rgba(255, 255, 255, .15);
            padding: 1.25rem;
            border-radius: 12px;
            margin-top: 1rem;
            text-align: center
        }

        .result-total .amount {
            font-size: 2.5rem;
            font-weight: 900
        }

        .margin-badge {
            display: inline-block;
            background: var(--s);
            padding: .4rem .8rem;
            border-radius: 50px;
            margin-top: .75rem;
            font-size: .85rem
        }

        /* CATEGORY PILLS */
        .pills {
            display: flex;
            flex-wrap: wrap;
            gap: .5rem;
            margin-bottom: 1rem
        }

        .pill {
            padding: .4rem .8rem;
            background: #f1f5f9;
            border: 1px solid #e2e8f0;
            border-radius: 50px;
            font-size: .8rem;
            cursor: pointer;
            transition: .3s
        }

        .pill:hover,
        .pill.active {
            background: var(--pl);
            color: #fff;
            border-color: var(--pl)
        }

        /* SEARCH */
        .search-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem
        }

        .search-box {
            flex: 1
        }

        .search-box input {
            width: 100%;
            padding: .65rem 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: .9rem
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--pl)
        }

        /* SERVICE CARDS */
        .services-grid {
            display: flex;
            flex-direction: column;
            gap: .75rem
        }

        .service-card {
            background: #fff;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, .05);
            transition: .3s
        }

        .service-card:hover {
            box-shadow: 0 4px 20px rgba(0, 0, 0, .1)
        }

        .service-header {
            padding: 1rem 1.25rem;
            display: grid;
            grid-template-columns: 1fr auto;
            align-items: center;
            cursor: pointer;
            border-left: 4px solid var(--p)
        }

        .service-header.expanded {
            background: #f8fafc;
            border-left-color: var(--a)
        }

        .service-info h4 {
            color: var(--p);
            font-size: .95rem;
            margin-bottom: .2rem
        }

        .service-info .code {
            font-size: .75rem;
            color: #64748b
        }

        .service-pricing {
            text-align: right
        }

        .service-pricing .price {
            font-size: 1.05rem;
            font-weight: 700;
            color: var(--s)
        }

        .service-pricing .time {
            font-size: .75rem;
            color: #64748b
        }

        /* EXPANDED DETAILS */
        .service-details {
            display: none;
            padding: 1.25rem;
            background: #f8fafc;
            border-top: 1px solid #e2e8f0
        }

        .service-details.show {
            display: block
        }

        .detail-section {
            margin-bottom: 1rem
        }

        .detail-section h5 {
            font-size: .85rem;
            color: var(--p);
            margin-bottom: .5rem;
            font-weight: 600
        }

        .detail-table {
            width: 100%;
            border-collapse: collapse;
            font-size: .8rem
        }

        .detail-table th {
            background: var(--p);
            color: #fff;
            padding: .5rem;
            text-align: left
        }

        .detail-table td {
            padding: .5rem;
            border-bottom: 1px solid #e2e8f0
        }

        .detail-table tr:hover td {
            background: #fff
        }

        .calc-block {
            background: #fff;
            padding: 1rem;
            border-radius: 8px;
            margin-top: .5rem
        }

        .calc-row {
            display: flex;
            justify-content: space-between;
            padding: .4rem 0;
            font-size: .85rem
        }

        .calc-row .price {
            color: var(--s);
            font-weight: 700
        }

        .calc-row .margin {
            color: var(--a);
            font-weight: 600
        }

        /* COUNT */
        .count {
            color: #64748b;
            font-size: .85rem;
            margin-bottom: .75rem
        }

        /* METHODOLOGY */
        .method-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0
        }

        .method-table th {
            background: var(--p);
            color: #fff;
            padding: .75rem;
            text-align: left
        }

        .method-table td {
            padding: .75rem;
            border-bottom: 1px solid #e2e8f0
        }

        .method-table tr:hover td {
            background: #f8fafc
        }

        .highlight {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            padding: 1rem;
            border-radius: 12px;
            margin: 1rem 0;
            border-left: 4px solid var(--a)
        }

        .tip {
            background: #ecfdf5;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid var(--s)
        }

        /* FOOTER */
        .footer {
            background: var(--bg);
            color: rgba(255, 255, 255, .7);
            text-align: center;
            padding: 2rem;
            margin-top: 2rem;
            font-size: .85rem
        }
    </style>
</head>

<body>

    <header class="header">
        <h1>üí∞ ORION <span>Price Book</span> Pro</h1>
        <p>AC Water Heaters & Plumbing | Bay Area, CA | Lead: $185/hr | Helper: $95/hr | Markup: 30%</p>
        <nav class="nav">
            <button class="nav-btn active" onclick="showSection('calc')">üßÆ Calculadora</button>
            <button class="nav-btn" onclick="showSection('catalogo')">üìã Cat√°logo (100)</button>
            <button class="nav-btn" onclick="showSection('metodo')">üìä Metodolog√≠a</button>
            <button class="nav-btn" onclick="showSection('upsells')">üí° Upsells</button>
        </nav>
    </header>

    <div class="container">

        <!-- CALCULADORA SECTION -->
        <div id="calc" class="section active">
            <div class="card">
                <h2>üßÆ Calculadora de Precios Profesional</h2>
                <p style="margin-bottom:1.5rem;color:#64748b">Calcula el precio para cualquier trabajo usando la
                    metodolog√≠a exacta del Price Book.</p>

                <div class="calc-grid">
                    <div>
                        <div class="input-group">
                            <label>üìã Tipo de Servicio</label>
                            <div class="explain">Ajusta la tarifa por hora seg√∫n urgencia. Emergencias = +50% sobre
                                tarifa normal.</div>
                            <select id="serviceType" onchange="calculate()">
                                <option value="1.0">Est√°ndar ($185/hr)</option>
                                <option value="1.5">üö® Emergencia (+50% = $277.50/hr)</option>
                                <option value="1.25">üåô After Hours (+25% = $231.25/hr)</option>
                                <option value="1.75">üìÖ Fin de Semana (+75% = $323.75/hr)</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label>‚è±Ô∏è Horas Trabajo Lead (T√©cnico Principal)</label>
                            <div class="explain">Tarifa base: $185/hr. El t√©cnico lead hace el trabajo especializado.
                            </div>
                            <input type="number" id="hoursLead" value="2" step="0.25" min="0" onchange="calculate()">
                        </div>

                        <div class="input-group">
                            <label>‚è±Ô∏è Horas Trabajo Ayudante</label>
                            <div class="explain">Tarifa base: $95/hr. El ayudante asiste en tareas simples.</div>
                            <input type="number" id="hoursHelper" value="0" step="0.25" min="0" onchange="calculate()">
                        </div>

                        <div class="input-group">
                            <label>üõ†Ô∏è Costo de Materiales (Tu costo real)</label>
                            <div class="explain">Ingresa lo que T√ö pagas. El sistema agrega autom√°ticamente 30% markup.
                            </div>
                            <input type="number" id="materials" value="100" step="10" min="0" onchange="calculate()">
                        </div>

                        <div class="input-group">
                            <label>üìà Margen de Ganancia (%)</label>
                            <div class="explain">40-50% es el est√°ndar de la industria. Cubre overhead, seguros, y
                                ganancia.</div>
                            <input type="number" id="margin" value="45" min="0" max="100" onchange="calculate()">
                        </div>

                        <div class="input-group">
                            <label>üèÜ Tier de Precio (Good/Better/Best)</label>
                            <div class="explain">Better es el recomendado. 60% de clientes lo eligen.</div>
                            <select id="tier" onchange="calculate()">
                                <option value="1.0">ü•â Good (Base)</option>
                                <option value="1.25" selected>ü•à Better (+25% - Recomendado)</option>
                                <option value="1.5">ü•á Best (+50% - Premium)</option>
                            </select>
                        </div>
                    </div>

                    <div class="result-card">
                        <h3 style="margin:0 0 1rem;font-size:1rem">üí∞ DESGLOSE DE PRECIO</h3>

                        <div class="result-item"><span>Mano de Obra Lead</span><span id="rLead">$370</span></div>
                        <div class="result-item"><span>Mano de Obra Ayudante</span><span id="rHelper">$0</span></div>
                        <div class="result-item"><span>Materiales + 30% Markup</span><span id="rMat">$130</span></div>
                        <div class="result-item"><span>TU COSTO TOTAL</span><span id="rCost">$500</span></div>

                        <div class="result-total">
                            <div style="font-size:.8rem;opacity:.8">PRECIO AL CLIENTE</div>
                            <div class="amount" id="rPrice">$1,136</div>
                            <div class="margin-badge" id="rMargin">45% margen = $636 ganancia</div>
                        </div>

                        <div style="margin-top:1rem;font-size:.8rem;opacity:.7">
                            <strong>F√≥rmula:</strong> (Costo Total √∑ (1 - Margen%)) √ó Tier
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- CAT√ÅLOGO SECTION -->
        <div id="catalogo" class="section">
            <div class="card">
                <h2>üìã Cat√°logo de Servicios</h2>

                <div class="pills" id="pills"></div>

                <div class="search-row">
                    <div class="search-box">
                        <input type="text" id="search" placeholder="üîç Buscar c√≥digo, nombre, material..."
                            onkeyup="filterServices()">
                    </div>
                </div>

                <p class="count" id="count">Mostrando 100 servicios</p>
                <div class="services-grid" id="grid"></div>
            </div>
        </div>

        <!-- METODOLOG√çA SECTION -->
        <div id="metodo" class="section">
            <div class="card">
                <h2>üìä Metodolog√≠a de C√°lculo</h2>

                <table class="method-table">
                    <tr>
                        <th>Concepto</th>
                        <th>F√≥rmula</th>
                        <th>Ejemplo</th>
                    </tr>
                    <tr>
                        <td><strong>Costo Material (+Markup)</strong></td>
                        <td>Costo Base √ó 1.30</td>
                        <td>$100 ‚Üí $130</td>
                    </tr>
                    <tr>
                        <td><strong>Costo Mano de Obra</strong></td>
                        <td>Horas √ó $185/hr</td>
                        <td>2 hr ‚Üí $370</td>
                    </tr>
                    <tr>
                        <td><strong>Costo Total (Tu Costo)</strong></td>
                        <td>Material + Mano de Obra</td>
                        <td>$130 + $370 = $500</td>
                    </tr>
                    <tr>
                        <td><strong>Precio Cliente</strong></td>
                        <td>Costo Total √ó 1.45 (‚âà45% margen)</td>
                        <td>$500 √ó 1.45 = $725</td>
                    </tr>
                    <tr>
                        <td><strong>Contingencia</strong></td>
                        <td>+10-15% para imprevistos</td>
                        <td>$725 + $72 = ~$800</td>
                    </tr>
                </table>

                <div class="highlight">
                    <strong>üí° IMPORTANTE:</strong> El margen del 40-50% es est√°ndar en la industria. Cubre overhead
                    (vehiculo, herramientas, oficina), seguros, licencias, y tu ganancia neta.
                </div>
            </div>

            <div class="card">
                <h2>üéØ Sistema Good / Better / Best</h2>

                <div class="tip">
                    <strong>Estrategia de Ventas:</strong> Siempre presenta las 3 opciones. El 60% de clientes elige
                    "BETTER".
                </div>

                <table class="method-table">
                    <tr>
                        <th>Tier</th>
                        <th>Descripci√≥n</th>
                        <th>Markup Extra</th>
                        <th>Cu√°ndo Ofrecer</th>
                    </tr>
                    <tr>
                        <td>ü•â <strong>GOOD</strong></td>
                        <td>Servicio b√°sico, materiales est√°ndar</td>
                        <td>Base</td>
                        <td>Cliente sensible a precio</td>
                    </tr>
                    <tr>
                        <td>ü•à <strong>BETTER</strong></td>
                        <td>Materiales premium, garant√≠a extendida</td>
                        <td>+20-30%</td>
                        <td>Recomendado por defecto</td>
                    </tr>
                    <tr>
                        <td>ü•á <strong>BEST</strong></td>
                        <td>Top de l√≠nea, m√°xima garant√≠a, add-ons</td>
                        <td>+40-60%</td>
                        <td>Clientes que quieren lo mejor</td>
                    </tr>
                </table>

                <h3>Ejemplo: Water Heater 40 Gal</h3>
                <table class="method-table">
                    <tr>
                        <th>Opci√≥n</th>
                        <th>Descripci√≥n</th>
                        <th>Garant√≠a</th>
                        <th>Precio</th>
                    </tr>
                    <tr>
                        <td>ü•â GOOD</td>
                        <td>Bradford White Standard</td>
                        <td>6 a√±os tanque</td>
                        <td><strong>$2,400</strong></td>
                    </tr>
                    <tr>
                        <td>ü•à BETTER</td>
                        <td>+ Expansion Tank + Pan + Straps</td>
                        <td>6 a√±os + 1 a√±o labor</td>
                        <td><strong>$2,950</strong></td>
                    </tr>
                    <tr>
                        <td>ü•á BEST</td>
                        <td>Rheem Pro + All Code Upgrades + Recirculation</td>
                        <td>10 a√±os + 2 a√±os labor</td>
                        <td><strong>$3,800</strong></td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- UPSELLS SECTION -->
        <div id="upsells" class="section">
            <div class="card">
                <h2>üí° Sistema de Upsells</h2>

                <div class="highlight">Cada job es una oportunidad. Estos upsells aumentan ticket promedio 25-40%.</div>

                <h3>üîß Al Instalar Appliances:</h3>
                <table class="method-table">
                    <tr>
                        <th>Upsell</th>
                        <th>Precio</th>
                        <th>Script de Venta</th>
                    </tr>
                    <tr>
                        <td><strong>Braided SS Hoses</strong></td>
                        <td>+$85</td>
                        <td>"Estas mangueras de acero inoxidable duran 10+ a√±os y previenen inundaciones"</td>
                    </tr>
                    <tr>
                        <td><strong>Emergency Shut-Off</strong></td>
                        <td>+$185</td>
                        <td>"Si hay una fuga, puede cerrar el agua en segundos"</td>
                    </tr>
                    <tr>
                        <td><strong>Hammer Arrestor</strong></td>
                        <td>+$145</td>
                        <td>"Elimina ese golpe que escucha - protege sus tuber√≠as"</td>
                    </tr>
                </table>

                <h3>üî• Al Trabajar con Gas:</h3>
                <table class="method-table">
                    <tr>
                        <th>Upsell</th>
                        <th>Precio</th>
                        <th>Script de Venta</th>
                    </tr>
                    <tr>
                        <td><strong>Seismic Valve</strong></td>
                        <td>+$450</td>
                        <td>"Obligatorio en California - protege de fugas por terremoto"</td>
                    </tr>
                    <tr>
                        <td><strong>Sediment Trap</strong></td>
                        <td>+$185</td>
                        <td>"Captura part√≠culas antes de que da√±en su equipo"</td>
                    </tr>
                    <tr>
                        <td><strong>Gas Leak Test</strong></td>
                        <td>+$150</td>
                        <td>"Ya que estamos aqu√≠, podemos verificar todo su sistema"</td>
                    </tr>
                </table>

                <h3>‚ô®Ô∏è Al Instalar Water Heater:</h3>
                <table class="method-table">
                    <tr>
                        <th>Upsell</th>
                        <th>Precio</th>
                        <th>Script de Venta</th>
                    </tr>
                    <tr>
                        <td><strong>Expansion Tank</strong></td>
                        <td>+$350</td>
                        <td>"Obligatorio por c√≥digo y protege su calentador"</td>
                    </tr>
                    <tr>
                        <td><strong>Recirculation Pump</strong></td>
                        <td>+$650</td>
                        <td>"Agua caliente instant√°nea - ahorra agua y tiempo"</td>
                    </tr>
                    <tr>
                        <td><strong>PRV Check/Replace</strong></td>
                        <td>+$450</td>
                        <td>"La presi√≥n alta es la causa #1 de fallas prematuras"</td>
                    </tr>
                </table>
            </div>
        </div>

    </div>

    <footer class="footer">
        <p>üí∞ ORION Price Book Pro | AC Water Heaters & Plumbing | Bay Area, CA</p>
        <p>Lead: $185/hr | Helper: $95/hr | Markup: 30% | Margen: 40-50%</p>
    </footer>

    <script>
// SERVICES DATA - 100 services with full details
const services = [
{"code":"AP-002","name":"Dishwasher Complete Installation","cat":"Appliances","t","precio":"$485-$585","tu_costo":"$351.60","margen":"$158-$233","subs":[{"t":"Posicionar unidad","d":"15 min"},{"t":"Conectar suministro agua","d":"20 min"},{"t":"Conectar drenaje","d":},{"t":"Conexi√≥n el√©ctrica","d":"10 min"},{"t":"Asegurar a encimera","d":"10 min"},{"t":"Prueba funcionamiento","d":"15 min"}],"mats":[{"m":"Braided SS Supply 48\"","p":"$18"},{"m":"Drain hose 6'","p":"$12"},{"m":"Power cord kit 6'","p":"$15"},{"m":"Air gap chrome","p":"$8"},{"m":"Hose clamps (2)","p":"$4"}]},
{"code":"AP-003","name":"Complete Braided SS Supply Kit","cat":"Appliances","time":"30 min","precio":"$265-$325","tu_costo":"$150.50","margen":"$115-$175","subs":[],"mats":[]},
{"code":"AP-018","name":"Ice Maker Water Supply (Up to 15')","cat":"Appliances","time":"1.0 hr","precio":"$425-$525","tu_costo":"$234.40","margen":"$191-$291","subs":[{"t":"Localizar l√≠nea agua fr√≠a","d":"10 min"},{"t":"Instalar saddle valve","d":"20 min"},{"t":"Tender l√≠nea cobre 1/4\"","d":"20 min"},{"t":"Conectar al refrigerador","d":"10 min"}],"mats":[{"m":"Soft copper 1/4\" √ó 15'","p":"$18"},{"m":"Self-piercing saddle valve","p":"$12"},{"m":"Compression fittings","p":"$8"}]},
{"code":"AP-020","name":"Emergency Shut-Off Valve (1/4 Turn)","cat":"Appliances","time":"30 min","precio":"$225-$285","tu_costo":"$111.50","margen":"$114-$174","subs":[],"mats":[]},
{"code":"AP-027","name":"Disconnect & Reinstall Washer/Dryer","cat":"Appliances","time":"1.0 hr","precio":"$350-$450","tu_costo":"$185","margen":"$165-$265","subs":[{"t":"Cerrar v√°lvulas agua","d":"5 min"},{"t":"Desconectar mangueras","d":"10 min"},{"t":"Mover unidades","d":"20 min"},{"t":"Reconectar todo","d":"25 min"}],"mats":[]},
{"code":"AP-029","name":"Braided SS No-Burst Hoses (Par)","cat":"Appliances","time":"15 min","precio":"$165-$225","tu_costo":"$91.50","margen":"$74-$134","subs":[],"mats":[]},
{"code":"AP-031","name":"Trap & Standpipe","cat":"Appliances","time":"2.0 hr","precio":"$750-$950","tu_costo":"$428.50","margen":"$322-$522","subs":[],"mats":[]},
{"code":"AP-032","name":"Recessed Box (Water & Drain)","cat":"Appliances","time":"3.0 hr","precio":"$1,150-$1,450","tu_costo":"$711","margen":"$439-$739","subs":[],"mats":[]},
{"code":"AP-033","name":"Washing Machine Drain Pan","cat":"Appliances","time":"1.5 hr","precio":"$550-$685","tu_costo":"$335.50","margen":"$215-$350","subs":[],"mats":[]},
{"code":"AP-034","name":"Hammer Arrestor","cat":"Appliances","time":"30 min","precio":"$250-$325","tu_costo":"$137.50","margen":"$113-$188","subs":[],"mats":[]},
{"code":"GS-007","name":"Connect Gas Dryer (48\" SS Flex)","cat":"Gas Systems","time":"45 min","precio":"$350-$450","tu_costo":"$199.10","margen":"$151-$251","subs":[{"t":"Verificar shut-off valve","d":"5 min"},{"t":"Instalar gas flex","d":"25 min"},{"t":"Prueba de fugas","d":"10 min"},{"t":"Verificar ignici√≥n","d":"5 min"}],"mats":[{"m":"SS Gas Flex 48\" 1/2\"","p":"$28"},{"m":"Gas shut-off valve","p":"$15"},{"m":"Yellow Teflon tape","p":"$4"}]},
{"code":"GS-008","name":"Connect Gas Range/Cooktop","cat":"Gas Systems","time":"1.0 hr","precio":"$425-$550","tu_costo":"$250","margen":"$175-$300","subs":[],"mats":[]},
{"code":"GS-009","name":"Connect Dryer Vent","cat":"Gas Systems","time":"30 min","precio":"$225-$285","tu_costo":"$124.50","margen":"$101-$161","subs":[],"mats":[]},
{"code":"GS-010","name":"Dryer Vent Kit Through Stucco","cat":"Gas Systems","time":"2.5 hr","precio":"$950-$1,200","tu_costo":"$546.50","margen":"$404-$654","subs":[],"mats":[]},
{"code":"GS-011","name":"Hard Pipe Dryer Vent (Up to 10')","cat":"Gas Systems","time":"2.0 hr","precio":"$750-$950","tu_costo":"$448","margen":"$302-$502","subs":[],"mats":[]},
{"code":"GS-013","name":"SS Gas Supply + Emergency Shut-Off","cat":"Gas Systems","time":"1.0 hr","precio":"$425-$550","tu_costo":"$242.20","margen":"$183-$308","subs":[],"mats":[{"m":"SS Gas Flex 18\" 1/2\"","p":"$22"},{"m":"1/2\" Gas Ball Valve","p":"$18"},{"m":"Yellow Teflon","p":"$4"}]},
{"code":"GS-014","name":"Sediment Trap for Gas Line","cat":"Gas Systems","time":"45 min","precio":"$285-$385","tu_costo":"$164","margen":"$121-$221","subs":[],"mats":[]},
{"code":"GS-015","name":"1/2\" Emergency Gas Valve","cat":"Gas Systems","time":"45 min","precio":"$285-$385","tu_costo":"$161.40","margen":"$124-$224","subs":[],"mats":[]},
{"code":"GS-016","name":"3/4\" Emergency Gas Valve","cat":"Gas Systems","time":"45 min","precio":"$325-$425","tu_costo":"$170.50","margen":"$155-$255","subs":[],"mats":[]},
{"code":"GS-100","name":"Seismic Earthquake Shut-Off Valve","cat":"Gas Systems","time":"2.5 hr","precio":"$1,100-$1,400","tu_costo":"$657","margen":"$443-$743","subs":[{"t":"Cierre gas en medidor","d":"10 min"},{"t":"Cortar l√≠nea existente","d":"15 min"},{"t":"Preparar conexiones","d":"30 min"},{"t":"Instalar v√°lvula s√≠smica","d":"20 min"},{"t":"Prueba de presi√≥n","d":"30 min"},{"t":"Reencender pilotos","d":"15 min"}],"mats":[{"m":"Seismic valve (Watts)","p":"$120"},{"m":"Nipples, unions","p":"$25"},{"m":"Teflon, pipe dope","p":"$5"}]},
{"code":"BF-036","name":"3/4\" RPZ Backflow Preventer","cat":"Backflow","time":"3.0 hr","precio":"$2,800-$3,200","tu_costo":"$1,783.50","margen":"$1,017-$1,417","subs":[{"t":"Cerrar agua y drenar","d":"20 min"},{"t":"Cortar l√≠nea existente","d":"15 min"},{"t":"Preparar conexiones","d":"30 min"},{"t":"Instalar device + soporte","d":"45 min"},{"t":"Instalar v√°lvulas","d":"30 min"},{"t":"Prueba funcionamiento","d":"30 min"}],"mats":[{"m":"Wilkins 975XL3 3/4\"","p":"$850"},{"m":"Ball valves (2)","p":"$40"},{"m":"Unions/adapters","p":"$30"},{"m":"Support strut","p":"$25"}]},
{"code":"BF-037","name":"1\" RPZ Backflow Preventer","cat":"Backflow","time":"3.5 hr","precio":"$3,200-$3,800","tu_costo":"$2,012","margen":"$1,188-$1,788","subs":[],"mats":[]},
{"code":"BF-040","name":"2\" RPZ Backflow Preventer","cat":"Backflow","time":"5.0 hr","precio":"$5,500-$6,500","tu_costo":"$3,460","margen":"$2,040-$3,040","subs":[],"mats":[]},
{"code":"BF-041","name":"Relief Valve Kit (3/4\"-1\")","cat":"Backflow","time":"1.0 hr","precio":"$550-$750","tu_costo":"$341","margen":"$209-$409","subs":[],"mats":[]},
{"code":"DR-083","name":"Bar Sink Stoppage (Remove Trap)","cat":"Drain Cleaning","time":"30 min","precio":"$165-$225","tu_costo":"$92","margen":"$73-$133","subs":[],"mats":[]},
{"code":"DR-085","name":"Kitchen Sink (Cable Machine)","cat":"Drain Cleaning","time":"45 min","precio":"$225-$285","tu_costo":"$138","margen":"$87-$147","subs":[{"t":"Remove P-trap","d":"5 min"},{"t":"Cable machine hasta 25'","d":"30 min"},{"t":"Reassemble, test","d":"10 min"}],"mats":[]},
{"code":"DR-090:"Main Line (Through Clean Out)","cat":"Drain Cleaning","time":"1.5-2.0 hr","precio":"$385-$550","tu_costo":"$277-$370","margen":"$108-$180","subs":[{"t":"Locate clean out","d":"5 min"},{"t":"Setup machine","d":"10 min"},{"t":"Cable main line 3-4\"","d":"60 min"},{"t":"Test flow","d":"10 min"},{"t":"Cleanup","d":"15 min"}],"mats":[]},
{"code":"DR-091","name":"Main Line (Through Water Closet)","cat":"Drain Cleaning","time":"2.0 hr","precio":"$550-$750","tu_costo":"$389.50","margen":"$161-$361","subs":[{"t":"Pull toilet","d":"15 min"},{"t":"Cable through flange","d":"75 min"},{"t":"Reinstall toilet","d":"25 min"},{"t":"Test","d":"5 min"}],"mats":[]},
{"code":"DR-098","name":"HydroJet Residential Main (Up to 200')","cat":"Drain Cleaning","time":"2.5-3.0 hr","precio":"$850-$1,250","tu_costo":"$495-$588","margen":"$355-$662","subs":[{"t":"Camera inspection previa","d":"30 min"},{"t":"Setup jetter equipment","d":"20 min"},{"t":"Post-camera verification","d":"15 min"}],"mats":[]},
{"code":"DR-099","name":"Camera Sewer Inspection","cat":"Drain Cleaning","time":"1.0 hr","precio":"$350-$550","tu_costo":"$198","margen":"$152-$352","subs":[],"mats":[]},
{"code":"DR-100","name":"Install House Clean Out","cat":"Drain Cleaning","time":"3.0-4.0 hr","precio":"$1,200-$1,600","tu_costo":"$659-$844","margen":"$541-$756","subs":[{"t":"Cut existing line","d":"20 min"},{"t":"Install wye + cleanout","d":"45 min"},{"t":"Backfill","d":"30 min"},{"t":"Test","d":"15 min"}],"mats":[]},
{"code":"FC-123","name":"Kitchen Faucet (No Pull Out)","cat":"Faucets","time":"1.0 hr","precio":"$350-$450","tu_costo":"$211","margen":"$139-$239","subs":[{"t":"Turn off water, disconnect","d":"15 min"},{"t":"Remove old faucet","d":"10 min"},{"t":"Clean surface, putty","d":"5 min"},{"t":"Install new faucet","d":"20 min"},{"t":"Connect supplies","d":"10 min"}],"mats":[]},
{"code":"FC-124","name":"Kitchen Faucet (With Pull Out)","cat":"Faucets","time":"1.25 hr","precio":"$425-$550","tu_costo":"$263.50","margen":"$162-$287","subs":[],"mats":[]},
{"code":"FC-126","name":"Bathroom Faucet (4\" Centered)","cat":"Faucets","time":"1.0 hr","precio":"$350-$450","tu_costo":"$211","margen":"$139-$239","subs":[],"mats":[]},
{"code":"FC-127","name":"Bathroom Faucet (Widespread)","cat":"Faucets","time":"1.5 hr","precio":"$550-$685","tu_costo":"$309.50","margen":"$241-$376","subs":[],"mats":[]},
{"code":"FC-129","name":"Tub/Shower Valve Replacement","cat":"Faucets","time":"3.0 hr","precio":"$1,250-$1,650","tu_costo":"$688","margen":"$562-$962","subs":[],"mats":[]},
{"code":"WF-137","name":"Whole House Sediment Filter","cat":"Filtration","time":"2.5 hr","precio":"$1,100-$1,450","tu_costo":"$617.50","margen":"$483-$833","subs":[],"mats":[]},
{"code":"WF-144","name":"Water Softener (1-3 Bath)","cat":"Filtration","time":"3.5 hr","precio":"$2,800-$3,500","tu_costo":"$1,562","margen":"$1,238-$1,938","subs":[],"mats":[]},
{"code":"WF-156","name":"6 Stage Pro RO System","cat":"Filtration","time":"2.0 hr","precio":"$1,250-$1,550","tu_costo":"$685","margen":"$565-$865","subs":[],"mats":[]},
{"code":"WH-100","name":"40 Gal Gas Water Heater Install","cat":"Water Heaters","time":"3.5 hr","precio":"$2,800-$3,200","tu_costo":"$1,548","margen":"$1,252-$1,652","subs":[{"t":"Drain and disconnect old","d":"30 min"},{"t":"Remove old unit","d":"20 min"},{"t":"Position new heater","d":"15 min"},{"t":"Connect water lines","d":"30 min"},{"t":"Connect gas line","d":"25 min"},{"t":"Install T&P valve + drain","d":"20 min"},{"t":"Fill, test, verify pilot","d":"30 min"}],"mats":[{"m":"Water heater 40G","p":"$850"},{"m":"Flex connectors 3/4\"","p":"$45"},{"m":"Gas flex 3/4\"","p":"$35"},{"m":"Vent connector","p":"$25"},{"m":"T&P drain kit","p":"$20"}]},
{"code":"WH-306","name":"Flexible Supply Line","cat":"Watrs","time":"30 min","precio":"$185-$245","tu_costo":"$118","margen":"$67-$127","subs":[],"mats":[]},
{"code":"WH-307","name":"Seismic Straps (30-50 Gal)","cat":"Water Heaters","time":"1.0 hr","precio":"$385-$485","tu_costo":"$228","margen","subs":[],"mats":[]},
{"code":"WH-335","name":"Thermocouple Replacement","cat":"Water Heaters","time":"1.0 hr","precio":"$350-$450","tu_costo":"$208","margen":"$142-$242","subs":},
{"code":"WH-343","name":"Flush and Drain Maintenance","cat":"Water Heaters","time":"1.0 hr","precio":"$325-$42":"$198","margen":"$127-$227","subs":[],"mats":[]},
{"code":"WH-354","name":"Tankless Ien/Rinnai)","cat":"Water Heaters","time":"10.0 hr","precio":"$7,000-$9,000","tu_costo":"$4,250","margen":"$2,750-$4,750","subs":[],"mats":[]},
{"code":"WD-168","name":"1ssure Regulator","cat":"Distribution","time":"1.5 hr","precio":"$650-$850","tu_costo":"$374.50","margen":"$276-$476","subs":[],"mats":[]},
{"code":"WD-185","name":"Repipe 1 Bath Home","cat":"Distribution","time":"16 hr","precio":"$6,500-$8,500","tu_costo":"$3,960","margen":"$2,540-$4,540","subs":[],"mats":[]},
{"code":"WD-186","name":"Repipe 2 Bath Home","cat":"Distribution","time":"24 hr","precio":"$9,500-$12,500","tu_costo":"$5,940","margen":"$3,560-$6,560","subs":[],"mats":[]},
{"code":"WD-227","name":"Repair Water Leak in Wall","cat":"Distribution","time":"2.5 hr","precio":"$850-$1,200","tu_costo":"$486","margen":"$364-$714","subs":[],"mats":[]},
{"code":"SL-241","name":"Minor Leak Search","eaks","time":"2.0 hr","precio":"$685-$950","tu_costo":"$397","margen":"$288-$553","subs":[],"mats":[]},
{"code":"SL-242","name":"Electronic Slab Leak Locate","cat":"Slab Leaks","time":"3.0 hr","precio":"$1,350-$1,750","tu7","margen":"$563-$963","subs":[],"mats":[]},
{"code":"SL-243","name":"Repair Pipe Under Slab","cat":"Slab Leaks","time":"8.0 hr","precio":"$2,800-$3,800","tu_costo":"$1,":"$1,120-$2,120","subs":[],"mats":[]},
{"code":"TL-276","name":"Replace Tank Standard","cat":"Toilets","time":"1.5 hr","precio":"tu_costo":"$397","margen":"$288-$453","subs":[],"mats":[]},
{"code":"TL-277","name":"Major Tank Rebuild","cat":"Toilets","time":"1.25 hr","precio":"$485-$625","tu_costo":"$289","margen":"$196-$336","subs":[],"mats":[]},
{"code":"TL-283","name":"Pull and Reset Toilet","cat":"Toilets","time":"1.0 hr","precio":"$325-$425","tu_costo":"$204","margen":"$121-$221","ss":[]},
{"code":"TL-297","name":"Closet Flange Replacement","cat":"Toilets","time":"2.0 hr","precio":"$685-$850","tu_costo":"$410","margen":"$275-$440","subs":[],"mats":[]},
{"code":"CS-392","name":"Install Client Garbage Disposal","cat":"Client Supplied","time":"1.0 hr","precio":"$350-$450","tu_costo":"$185","margen":"$165-$265",ats":[]},
{"code":"CS-393","name":"Install Client Dishwasher","cat":"Client Supplied","time":"1.5 hr","precio":"$485-$585","tu_costo":"$277.50","margen","subs":[],"mats":[]},
{"code":"CS-398","name":"Install Client Toilet","cat":"Client Supplied","time":"1.5 hr","precio":"$450-$550","tu_costo":"$277.50","margen":"$173-$273","subs":[],"mats":[]},
{"code":"CS-420","name":"Install Client Water Heater","cat":"Client Supplied","time":"3.5 hr","precio":"$1,250-$1,600","tu_costo":"$647.50","margen":"$603-$953","subs":[],"mats":[]},
{"code":"DM-047","name":"Whole Bath Demo (Excl. Subfloor)","cat":"Demolition","time":"4.0 hr","precio":"$1,500-$2,000","tu_costo":"$870","margen":"$630-$1,130","subs":[],"mats":[]},
{"code":"DM-048","name":"Fiberglass Tub/Shower Demo","cat":"Demolition","time":"3.0 hr","precio":"$1,100-$1,400","tu_costo":"$652.50","margen":"$448-$748","subs":[],"mats":[]},
{"code":"DM-056","name":"Re-Pour Concrete (2√ó2 Area)","cat":"Demolition","time":"2.5 hr","precio":"$850-$1,100","tu_costo":"$514","margen"586","subs":[],"mats":[]},
{"code":"DM-075","name":"Patch Wall (2√ó2)","cat":"Demolition","time":"1.5 hr","precio":"$550-$750","tu_costo":"$309.50","margen":"$241-$441","subs":[],"mats":[]}
];

// Get unique categories
cies = [...new Set(services.map(s => s.cat))];

// Initialize
function init() {
    renderPills();
    renderServices(services);
    calculate();
}

// Render category pills
function renderPills() {
    let html = '<span class="pill active" onclick="filterByCategory(\'all\')">üìã Todos ('+services.length+')</span>';
    categories.forEach(cat => {
        const count = services.filter(s => s.cat === cat).length;
        html += '<span class="pill" onclick="filterByCategory(\''+cat+'\')">'+cat+' ('+count+')</span>';
    });
    document.getElementById('pills').innerHTML = html;
}

// Render services
function renderServices(list) {
    const html = list.map((s, i) => {
        let subsHtml = '';
        if (s.subs && s.subs.length > 0) {
            subsHtml = '<div class="detail-section"><h5>üìã Sub-Actividades</h5><table class="detail-table"><tr><th>Tarea</th><th>Tiempo</th></tr>';
            s.subs.forEach(sub => {
                subsHtml += '<tr><td>'+sub.t+'</td><td>'+sub.d+'</td></tr>';
            });
            subsHtml += '</table></div>';
        }
        
        let matsHtml = '';
        if (s.mats && s.mats.length > 0) {
            matsHtml = '<div class="detail-section"><h5>üõ†Ô∏è Materiales</h5><table class="detail-table"><tr><th>Material</th><th>Precio</th></tr>';
            s.mats.forEach(mat => {
                matsHtml += '<tr><td>'+mat.m+'</td><td>'+mat.p+'</td></tr>';
            });
            matsHtml += '</table></div>';
        }
        
        let calcHtml = '';
        if (s.precio) {
            calcHtml = '<div class="detail-section"><h5>üí∞ C√°lculo de Precio</h5><div class="calc-block">';
            calcHtml += '<div class="calc-row"><span>‚è±Ô∏è Tiempo:</span><strong>'+s.time+'</strong></div>';
            calcHtml += '<div class="calc-row"><span>üíµ Tu Costo:</span><strong>'+s.tu_costo+'</strong></div>';
            calcHtml += '<div class="calc-row"><span>üí∞ Precio Cliente:</span><strong class="price">'+s.precio+'</strong></div>';
            calcHtml += '<div class="calc-row"><span>üìà Margen:</span><strong class="margin">'+s.margen+'</strong></div>';
            calcHtml += '</div></div>';
        }
        
        const hasDetails = (s.subs && s.subs.length > 0) || (s.mats && s.mats.length > 0);
        
        return `
        <div class="service-card">
            <div class="service-header" onclick="toggleDetails(${i})">
                <div class="service-info">
                    <h4>${s.name}</h4>
                    <span class="code">${s.code} | ${s.cat}</span>
                </div>
                <div class="service-pricing">
                    <div class="price">${s.precio}</div>
                    <div class="time">‚è±Ô∏è ${s.time}</div>
                </div>
            </div>
            <div class="service-details" id="details-${i}">
        ${subsHtml}
                ${matsHtml}
                ${calcHt            ${!hasDetails && !s.precio ? '<p style="color:#64748b;font-size:.85rem">No hay detalles adicionales para este servicio.</p>' : ''  </div>
        </div>`;
    }).join('');
    document.getElementById('grid').innerHTML = html;
    document.getElementById('count').textConrando '+list.length+' servicios';
}

// Toggle service details
function toggleDetails(i) {
    const details = document.getElementById('details-'+i);
    const header = details.previousElementSibling;
    if (details.classList.contains('show')) {
        details.classList.remove('show');
        header.classList.remove('expanded');
    } else {
        details.classList.add('show');
        header.classList.add('expanded');
    }
}

// Filter by category
let currentCat = 'all';
function filterByCategory(cat) {
    currentCat = cat;
    document.querySelectorAll('.pill').forEach(p => p.classList.remove('active'));
    event.target.classList.add('active');
    filterServices();
}

// Filter services
function filterServices() {
    let list = [...services];
    if (currentCat !== 'all') {
        list = list.filter(s => s.cat === currentCat);
    }
    const q = document.getElementById('search').value.toLowerCase();
    if (q) {
        list = list.filter(s => 
            s.code.toLowerCase().includes(q) || 
            s.name.toLowerCase().includes(q) ||
            s.cat.toLowerCase().includes(q)
        );
    }
    renderServices(list);
}

// Show section
function showSection(id) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    event.target.classList.add('active');
}

// Calculate price
function calculate() {
    const type = parseFloat(document.getElementById('serviceType').value);
    const hL = parseFloat(document.getElementById('hoursLead').value) || 0;
    const hH = parseFloat(document.getElementById('hoursHelper').value) || 0;
    const mat = parseFloat(document.getElementById('materials').value) || 0;
    const margin = parseFloat(document.getElementById('margin').value) || 45;
    const tier = parseFloat(document.getElementById('tier').value);

    const laborLead = hL * 185 * type;
    const laborHelp = hH * 95 * type;
    const matTotal = mat * 1.3;
    const cost = laborLead + laborHelp + matTotal;
    const base = cost / (1 - margin/100);
    const final = base * tier;
    const profit = final - cost;

    document.getElementById('rLead').textContent = '$' + laborLead.toLocaleString();
    document.getElementById('rHelper').textContent = '$' + laborHelp.toLocaleString();
    document.getElementById('rMat').textContent = '$' + matTotal.toLocaleString();
    document.getElementById('rCost').textContent = '$' + cost.toLocaleString();
    document.getElementById('rPritContent = '$' + Math.round(final).toLocaleString();
    document.getElementById('rMargin').textContent = margin + '% margen = $' + Math.round(profit).toLocaleStr' ganancia';
}

init();
    </script>
</body>

</html>